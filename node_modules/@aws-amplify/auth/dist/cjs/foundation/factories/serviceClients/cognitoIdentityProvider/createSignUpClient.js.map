{"version":3,"file":"createSignUpClient.js","sources":["../../../../../../src/foundation/factories/serviceClients/cognitoIdentityProvider/createSignUpClient.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSignUpClient = exports.createSignUpClientDeserializer = void 0;\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst composers_1 = require(\"@aws-amplify/core/internals/aws-client-utils/composers\");\nconst aws_client_utils_1 = require(\"@aws-amplify/core/internals/aws-client-utils\");\nconst AuthErrorStrings_1 = require(\"../../../../common/AuthErrorStrings\");\nconst AuthError_1 = require(\"../../../../errors/AuthError\");\nconst validation_1 = require(\"../../../../errors/types/validation\");\nconst assertServiceError_1 = require(\"../../../../errors/utils/assertServiceError\");\nconst errors_1 = require(\"../../../../providers/cognito/types/errors\");\nconst serde_1 = require(\"./shared/serde\");\nconst handler_1 = require(\"./shared/handler\");\nconst constants_1 = require(\"./constants\");\nconst createSignUpClientDeserializer = () => async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await (0, aws_client_utils_1.parseJsonError)(response);\n        (0, assertServiceError_1.assertServiceError)(error);\n        if (\n        // Missing Password Error\n        // 1 validation error detected: Value at 'password'failed to satisfy constraint: Member must not be null\n        error.name === errors_1.SignUpException.InvalidParameterException &&\n            /'password'/.test(error.message) &&\n            /Member must not be null/.test(error.message)) {\n            const name = validation_1.AuthValidationErrorCode.EmptySignUpPassword;\n            const { message, recoverySuggestion } = AuthErrorStrings_1.validationErrorMap[name];\n            throw new AuthError_1.AuthError({\n                name,\n                message,\n                recoverySuggestion,\n            });\n        }\n        throw new AuthError_1.AuthError({ name: error.name, message: error.message });\n    }\n    return (0, aws_client_utils_1.parseJsonBody)(response);\n};\nexports.createSignUpClientDeserializer = createSignUpClientDeserializer;\nconst createSignUpClient = (config) => (0, composers_1.composeServiceApi)(handler_1.cognitoUserPoolTransferHandler, (0, serde_1.createUserPoolSerializer)('SignUp'), (0, exports.createSignUpClientDeserializer)(), {\n    ...constants_1.DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\nexports.createSignUpClient = createSignUpClient;\n"],"names":[],"mappings":";;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,kBAAkB,GAAG,OAAO,CAAC,8BAA8B,GAAG,KAAK,CAAC,CAAC;AAC7E;AACA;AACA,MAAM,WAAW,GAAG,OAAO,CAAC,wDAAwD,CAAC,CAAC;AACtF,MAAM,kBAAkB,GAAG,OAAO,CAAC,8CAA8C,CAAC,CAAC;AACnF,MAAM,kBAAkB,GAAG,OAAO,CAAC,qCAAqC,CAAC,CAAC;AAC1E,MAAM,WAAW,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;AAC5D,MAAM,YAAY,GAAG,OAAO,CAAC,qCAAqC,CAAC,CAAC;AACpE,MAAM,oBAAoB,GAAG,OAAO,CAAC,6CAA6C,CAAC,CAAC;AACpF,MAAM,QAAQ,GAAG,OAAO,CAAC,4CAA4C,CAAC,CAAC;AACvE,MAAM,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC1C,MAAM,SAAS,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAC9C,MAAM,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAC3C,MAAM,8BAA8B,GAAG,MAAM,OAAO,QAAQ,KAAK;AACjE,IAAI,IAAI,QAAQ,CAAC,UAAU,IAAI,GAAG,EAAE;AACpC,QAAQ,MAAM,KAAK,GAAG,MAAM,IAAI,kBAAkB,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;AAC7E,QAAQ,IAAI,oBAAoB,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;AAC5D,QAAQ;AACR;AACA;AACA,QAAQ,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,eAAe,CAAC,yBAAyB;AACzE,YAAY,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;AAC5C,YAAY,yBAAyB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;AAC3D,YAAY,MAAM,IAAI,GAAG,YAAY,CAAC,uBAAuB,CAAC,mBAAmB,CAAC;AAClF,YAAY,MAAM,EAAE,OAAO,EAAE,kBAAkB,EAAE,GAAG,kBAAkB,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AAChG,YAAY,MAAM,IAAI,WAAW,CAAC,SAAS,CAAC;AAC5C,gBAAgB,IAAI;AACpB,gBAAgB,OAAO;AACvB,gBAAgB,kBAAkB;AAClC,aAAa,CAAC,CAAC;AACf,SAAS;AACT,QAAQ,MAAM,IAAI,WAAW,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AACtF,KAAK;AACL,IAAI,OAAO,IAAI,kBAAkB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;AAC3D,CAAC,CAAC;AACF,OAAO,CAAC,8BAA8B,GAAG,8BAA8B,CAAC;AACxE,MAAM,kBAAkB,GAAG,CAAC,MAAM,KAAK,IAAI,WAAW,CAAC,iBAAiB,EAAE,SAAS,CAAC,8BAA8B,EAAE,IAAI,OAAO,CAAC,wBAAwB,EAAE,QAAQ,CAAC,EAAE,IAAI,OAAO,CAAC,8BAA8B,GAAG,EAAE;AACpN,IAAI,GAAG,WAAW,CAAC,iCAAiC;AACpD,IAAI,GAAG,MAAM;AACb,CAAC,CAAC,CAAC;AACH,OAAO,CAAC,kBAAkB,GAAG,kBAAkB;;"}