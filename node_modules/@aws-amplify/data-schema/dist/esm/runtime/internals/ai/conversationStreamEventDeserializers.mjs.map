{"version":3,"file":"conversationStreamEventDeserializers.mjs","sources":["../../../../../src/runtime/internals/ai/conversationStreamEventDeserializers.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const convertItemToConversationStreamEvent = ({ id, conversationId, associatedUserMessageId, contentBlockIndex, contentBlockDoneAtIndex, contentBlockDeltaIndex, contentBlockText, contentBlockToolUse, stopReason, errors, }) => {\n    if (errors) {\n        const error = {\n            id,\n            conversationId,\n            associatedUserMessageId,\n            errors,\n        };\n        return { error };\n    }\n    const next = removeNullsFromConversationStreamEvent({\n        id,\n        conversationId,\n        associatedUserMessageId,\n        contentBlockIndex,\n        contentBlockDoneAtIndex,\n        contentBlockDeltaIndex,\n        text: contentBlockText,\n        toolUse: deserializeToolUseBlock(contentBlockToolUse),\n        stopReason,\n    });\n    return { next };\n};\nconst deserializeToolUseBlock = (contentBlockToolUse) => {\n    if (contentBlockToolUse) {\n        const toolUseBlock = {\n            ...contentBlockToolUse,\n            input: JSON.parse(contentBlockToolUse.input),\n        };\n        return toolUseBlock;\n    }\n};\nconst removeNullsFromConversationStreamEvent = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n"],"names":[],"mappings":"AAAA;AACA;AACY,MAAC,oCAAoC,GAAG,CAAC,EAAE,EAAE,EAAE,cAAc,EAAE,uBAAuB,EAAE,iBAAiB,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,UAAU,EAAE,MAAM,GAAG,KAAK;AACzO,IAAI,IAAI,MAAM,EAAE;AAChB,QAAQ,MAAM,KAAK,GAAG;AACtB,YAAY,EAAE;AACd,YAAY,cAAc;AAC1B,YAAY,uBAAuB;AACnC,YAAY,MAAM;AAClB,SAAS,CAAC;AACV,QAAQ,OAAO,EAAE,KAAK,EAAE,CAAC;AACzB,KAAK;AACL,IAAI,MAAM,IAAI,GAAG,sCAAsC,CAAC;AACxD,QAAQ,EAAE;AACV,QAAQ,cAAc;AACtB,QAAQ,uBAAuB;AAC/B,QAAQ,iBAAiB;AACzB,QAAQ,uBAAuB;AAC/B,QAAQ,sBAAsB;AAC9B,QAAQ,IAAI,EAAE,gBAAgB;AAC9B,QAAQ,OAAO,EAAE,uBAAuB,CAAC,mBAAmB,CAAC;AAC7D,QAAQ,UAAU;AAClB,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,EAAE,IAAI,EAAE,CAAC;AACpB,EAAE;AACF,MAAM,uBAAuB,GAAG,CAAC,mBAAmB,KAAK;AACzD,IAAI,IAAI,mBAAmB,EAAE;AAC7B,QAAQ,MAAM,YAAY,GAAG;AAC7B,YAAY,GAAG,mBAAmB;AAClC,YAAY,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,KAAK,CAAC;AACxD,SAAS,CAAC;AACV,QAAQ,OAAO,YAAY,CAAC;AAC5B,KAAK;AACL,CAAC,CAAC;AACF,MAAM,sCAAsC,GAAG,CAAC,KAAK,KAAK,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,CAAC;;;;"}