"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.listConnectedDevices = void 0;
const ansi_colors_1 = __importDefault(require("ansi-colors"));
const logger_1 = __importDefault(require("../../../../logger"));
const appium_adb_1 = __importDefault(require("../../utils/appium-adb"));
const common_1 = require("../../utils/common");
const common_2 = require("../common");
async function listConnectedDevices(sdkRoot, platform) {
    const adbLocation = (0, common_1.getBinaryLocation)(sdkRoot, platform, 'adb', true);
    if (adbLocation === '') {
        (0, common_2.showMissingBinaryHelp)('adb');
        return false;
    }
    const adb = await appium_adb_1.default.createADB({ allowOfflineDevices: true });
    const devices = await adb.getConnectedDevices();
    if (!devices.length) {
        logger_1.default.log(ansi_colors_1.default.yellow('No connected devices found.\n'));
        return true;
    }
    await (0, common_2.showConnectedRealDevices)();
    await (0, common_2.showConnectedEmulators)();
    return true;
}
exports.listConnectedDevices = listConnectedDevices;
